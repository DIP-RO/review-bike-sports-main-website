{"ast":null,"code":"import _slicedToArray from\"F:/sunshine-full-project/robert/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{Link,useLoaderData}from\"react-router-dom\";import{FaStar}from\"react-icons/fa\";import{useContext}from\"react\";import{AuthContext}from\"../../Context/UserContext/UserContext\";import{useState}from\"react\";import{useEffect}from\"react\";import ReviewCard from\"../ReviewCard/ReviewCard\";import toast from\"react-hot-toast\";import\"react-photo-view/dist/react-photo-view.css\";import useTitle from\"../../Hooks/useTitle\";import{PhotoProvider,PhotoView}from\"react-photo-view\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ServiceDetail=function ServiceDetail(){var data=useLoaderData();var title=data.title,details=data.details,image_url=data.image_url,price=data.price,_id=data._id;useTitle(\"Service Detail\");var _useContext=useContext(AuthContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),reviews=_useState2[0],setReview=_useState2[1];useEffect(function(){fetch(\" https://server-bay-theta.vercel.app/allreview\").then(function(res){return res.json();}).then(function(data){var servicewise=data.filter(function(d){return d.serviceID===_id;});setReview(servicewise);});},[reviews,_id]);var date=new Date().getTime();var handleSubmit=function handleSubmit(e){e.preventDefault();var form=e.target;var reviewMessage=form.review.value;var review={serviceID:_id,customerName:user===null||user===void 0?void 0:user.displayName,customerEmail:user===null||user===void 0?void 0:user.email,customer:user===null||user===void 0?void 0:user.photoURL,review:reviewMessage,time:date};fetch(\"https://server-bay-theta.vercel.app/review\",{method:\"POST\",headers:{\"content-type\":\"application/json\"},body:JSON.stringify(review)}).then(function(result){toast.success(\"Review Added\");form.reset();}).catch(function(err){return console.log(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"px-4 md:px-20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 mb-5 mt-10\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(PhotoProvider,{children:/*#__PURE__*/_jsx(PhotoView,{src:image_url,children:/*#__PURE__*/_jsx(\"img\",{src:image_url,alt:\"\",className:\"object-cover object-center w-full rounded-md h-11/12  bg-gray-500\"})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-3 md:ml-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-4xl font-bold\",children:title}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold my-6\",children:details}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex mb-4 items-center\",children:[\"Ratings : \",/*#__PURE__*/_jsx(FaStar,{className:\"text-orange-400 mx-2\"}),\" 4.5\"]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xl font-semibold\",children:[\"Price:$ \",price]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"px-4 mx-auto my-3 py-2 font-semibold rounded  border border-purple-500 hover:border-gray-00 bg-purple-500 hover:bg-white text-white transition  hover:text-purple-500\",children:\"Book Service\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold\",children:\"Reviews\"})}),/*#__PURE__*/_jsx(\"div\",{children:reviews.map(function(rev){return/*#__PURE__*/_jsx(ReviewCard,{rev:rev},rev._id);})}),user!==null&&user!==void 0&&user.uid?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex  gap-3 my-10 items-center\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"w-12 rounded-full\",src:user===null||user===void 0?void 0:user.photoURL,alt:\"\"}),/*#__PURE__*/_jsx(\"input\",{name:\"review\",type:\"text\",placeholder:\"Type here\",className:\"input input-bordered w-60 md:w-96\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",fill:\"none\",viewBox:\"0 0 24 24\",strokeWidth:1.5,stroke:\"currentColor\",className:\"w-6 hover:text-gray-700 text-gray-900 h-6\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",d:\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\"})})})]})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsxs(\"p\",{className:\"font-semibold my-10 \",children:[\"Please\",\" \",/*#__PURE__*/_jsx(Link,{className:\"underline\",to:\"/login\",children:\"Login\"}),\" \",\"to add a review\"]})})]})]});};export default ServiceDetail;","map":{"version":3,"names":["React","Link","useLoaderData","FaStar","useContext","AuthContext","useState","useEffect","ReviewCard","toast","useTitle","PhotoProvider","PhotoView","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ServiceDetail","data","title","details","image_url","price","_id","_useContext","user","_useState","_useState2","_slicedToArray","reviews","setReview","fetch","then","res","json","servicewise","filter","d","serviceID","date","Date","getTime","handleSubmit","e","preventDefault","form","target","reviewMessage","review","value","customerName","displayName","customerEmail","email","customer","photoURL","time","method","headers","body","JSON","stringify","result","success","reset","catch","err","console","log","className","children","src","alt","type","map","rev","uid","onSubmit","name","placeholder","xmlns","fill","viewBox","strokeWidth","stroke","strokeLinecap","strokeLinejoin","to"],"sources":["F:/sunshine-full-project/robert/src/Components/ServiceDetail/ServiceDetail.js"],"sourcesContent":["import React from \"react\";\nimport { Link, useLoaderData } from \"react-router-dom\";\nimport { FaStar } from \"react-icons/fa\";\nimport { useContext } from \"react\";\nimport { AuthContext } from \"../../Context/UserContext/UserContext\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport ReviewCard from \"../ReviewCard/ReviewCard\";\nimport toast from \"react-hot-toast\";\nimport \"react-photo-view/dist/react-photo-view.css\";\nimport useTitle from \"../../Hooks/useTitle\";\nimport { PhotoProvider, PhotoView } from \"react-photo-view\";\n\nconst ServiceDetail = () => {\n  const data = useLoaderData();\n  const { title, details, image_url, price, _id } = data;\n  useTitle(\"Service Detail\");\n\n  const { user } = useContext(AuthContext);\n\n  const [reviews, setReview] = useState([]);\n  useEffect(() => {\n    fetch(` https://server-bay-theta.vercel.app/allreview`)\n      .then((res) => res.json())\n      .then((data) => {\n        const servicewise = data.filter((d) => d.serviceID === _id);\n\n        setReview(servicewise);\n      });\n  }, [reviews, _id]);\n\n  const date = new Date().getTime();\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const form = e.target;\n    const reviewMessage = form.review.value;\n\n    const review = {\n      serviceID: _id,\n      customerName: user?.displayName,\n      customerEmail: user?.email,\n      customer: user?.photoURL,\n      review: reviewMessage,\n      time: date,\n    };\n\n    fetch(\"https://server-bay-theta.vercel.app/review\", {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n      },\n      body: JSON.stringify(review),\n    })\n      .then((result) => {\n        toast.success(\"Review Added\");\n        form.reset();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  return (\n    <div className=\"px-4 md:px-20\">\n      <div className=\"grid grid-cols-1 md:grid-cols-2 mb-5 mt-10\">\n        <div>\n          <PhotoProvider>\n            <PhotoView src={image_url}>\n              <img\n                src={image_url}\n                alt=\"\"\n                className=\"object-cover object-center w-full rounded-md h-11/12  bg-gray-500\"\n              />\n            </PhotoView>\n          </PhotoProvider>\n        </div>\n        <div className=\"ml-3 md:ml-10\">\n          <h1 className=\"text-4xl font-bold\">{title}</h1>\n          <p className=\"font-semibold my-6\">{details}</p>\n          <div className=\"flex mb-4 items-center\">\n            Ratings : <FaStar className=\"text-orange-400 mx-2\"></FaStar> 4.5\n          </div>\n          <p className=\"text-xl font-semibold\">Price:$ {price}</p>\n          <button\n            type=\"button\"\n            className=\"px-4 mx-auto my-3 py-2 font-semibold rounded  border border-purple-500 hover:border-gray-00 bg-purple-500 hover:bg-white text-white transition  hover:text-purple-500\"\n          >\n            Book Service\n          </button>\n        </div>\n      </div>\n      <div className=\"\">\n        <div>\n          <h1 className=\"text-2xl font-semibold\">Reviews</h1>\n        </div>\n        <div>\n          {reviews.map((rev) => (\n            <ReviewCard key={rev._id} rev={rev}></ReviewCard>\n          ))}\n        </div>\n\n        {user?.uid ? (\n          <>\n            <form\n              onSubmit={handleSubmit}\n              className=\"flex  gap-3 my-10 items-center\"\n            >\n              <img className=\"w-12 rounded-full\" src={user?.photoURL} alt=\"\" />\n              <input\n                name=\"review\"\n                type=\"text\"\n                placeholder=\"Type here\"\n                className=\"input input-bordered w-60 md:w-96\"\n              />\n              <button type=\"submit\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  strokeWidth={1.5}\n                  stroke=\"currentColor\"\n                  className=\"w-6 hover:text-gray-700 text-gray-900 h-6\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M6 12L3.269 3.126A59.768 59.768 0 0121.485 12 59.77 59.77 0 013.27 20.876L5.999 12zm0 0h7.5\"\n                  />\n                </svg>\n              </button>\n            </form>\n          </>\n        ) : (\n          <>\n            <p className=\"font-semibold my-10 \">\n              Please{\" \"}\n              <Link className=\"underline\" to=\"/login\">\n                Login\n              </Link>{\" \"}\n              to add a review\n            </p>\n          </>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ServiceDetail;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}