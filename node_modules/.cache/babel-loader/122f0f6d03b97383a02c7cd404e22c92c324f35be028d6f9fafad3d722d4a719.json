{"ast":null,"code":"var _jsxFileName = \"F:\\\\sunshine-full-project\\\\robert\\\\src\\\\Pages\\\\MyReviews\\\\MyReviews.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useContext } from 'react';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport { AuthContext } from '../../Context/UserContext/UserContext';\nimport useTitle from '../../Hooks/useTitle';\nimport MyReviewCard from './MyReviewCard';\nimport './MyReview.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MyReviews = () => {\n  _s();\n  const {\n    logOut\n  } = useContext(AuthContext);\n  useTitle('My Reviews');\n  const {\n    user\n  } = useContext(AuthContext);\n  const [review, setReview] = useState([]);\n  useEffect(() => {\n    fetch(` https://assignment-11-server-gilt.vercel.app/review?email=${user.email}`, {\n      headers: {\n        authorization: `Bearer ${localStorage.getItem('RobertToken')}`\n      }\n    }).then(res => {\n      if (res.status === 401 || res.status === 403) {\n        return logOut();\n      }\n      return res.json();\n    }).then(data => {\n      const userBasedReview = data.filter(d => d.customerEmail === (user === null || user === void 0 ? void 0 : user.email));\n      setReview(userBasedReview);\n    });\n  }, [logOut, user === null || user === void 0 ? void 0 : user.email]);\n  const handleDeleteReview = id => {\n    console.log(id);\n    fetch(`https://assignment-11-server-gilt.vercel.app/review/${id}`, {\n      method: 'DELETE'\n    }).then(res => res.json()).then(data => {\n      console.log(data);\n      if (data.deletedCount > 0) {\n        toast.error('Comment Deleted Successfully');\n        const remainingReviews = review.filter(rev => rev._id !== id);\n        setReview(remainingReviews);\n      }\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" px-4 mb-60 md:px-48 my-10\",\n    children: review.length !== 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: review === null || review === void 0 ? void 0 : review.map(rev => /*#__PURE__*/_jsxDEV(MyReviewCard, {\n        rev: rev,\n        handleDeleteReview: handleDeleteReview\n      }, rev._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 48\n      }, this))\n    }, void 0, false) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-nothing \",\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"md:text-4xl text-2xl font-bold text-center \",\n        children: \" No reviews were added\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 58,\n    columnNumber: 9\n  }, this);\n};\n_s(MyReviews, \"oYUfy2AyZXof9bD2FqSbeCrlCKI=\", false, function () {\n  return [useTitle];\n});\n_c = MyReviews;\nexport default MyReviews;\nvar _c;\n$RefreshReg$(_c, \"MyReviews\");","map":{"version":3,"names":["React","useContext","useEffect","useState","toast","AuthContext","useTitle","MyReviewCard","jsxDEV","_jsxDEV","Fragment","_Fragment","MyReviews","_s","logOut","user","review","setReview","fetch","email","headers","authorization","localStorage","getItem","then","res","status","json","data","userBasedReview","filter","d","customerEmail","handleDeleteReview","id","console","log","method","deletedCount","error","remainingReviews","rev","_id","className","children","length","map","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["F:/sunshine-full-project/robert/src/Pages/MyReviews/MyReviews.js"],"sourcesContent":["import React from 'react';\nimport { useContext } from 'react';\nimport { useEffect } from 'react';\nimport { useState } from 'react';\nimport toast from 'react-hot-toast';\nimport { AuthContext } from '../../Context/UserContext/UserContext';\nimport useTitle from '../../Hooks/useTitle';\nimport MyReviewCard from './MyReviewCard';\nimport './MyReview.css'\n\n\nconst MyReviews = () => {\n    const { logOut } = useContext(AuthContext)\n    useTitle('My Reviews')\n\n\n    const { user } = useContext(AuthContext)\n    const [review, setReview] = useState([])\n\n    useEffect(() => {\n        fetch(` https://assignment-11-server-gilt.vercel.app/review?email=${user.email}`, {\n            headers: {\n                authorization: `Bearer ${localStorage.getItem('RobertToken')}`\n            }\n        })\n            .then(res => {\n\n                if (res.status === 401 || res.status === 403) {\n                    return logOut()\n                }\n                return res.json()\n            })\n            .then(data => {\n                const userBasedReview = data.filter(d => d.customerEmail === user?.email)\n                setReview(userBasedReview)\n            })\n    }, [logOut, user?.email])\n\n    const handleDeleteReview = (id) => {\n        console.log(id)\n        fetch(`https://assignment-11-server-gilt.vercel.app/review/${id}`, {\n            method: 'DELETE',\n        })\n            .then(res => res.json())\n            .then(data => {\n                console.log(data)\n                if (data.deletedCount > 0) {\n                    toast.error('Comment Deleted Successfully')\n                    const remainingReviews = review.filter(rev => rev._id !== id)\n\n                    setReview(remainingReviews)\n                }\n            })\n\n    }\n\n    return (\n        <div className=' px-4 mb-60 md:px-48 my-10'>\n            {\n                review.length !== 0 ?\n                    <>\n                        {\n                            review?.map(rev => <MyReviewCard\n                                key={rev._id}\n                                rev={rev}\n                                handleDeleteReview={handleDeleteReview}\n                            ></MyReviewCard>)\n                        }\n                    </>\n                    :\n                    <div className='text-nothing '>\n                        <h1 className='md:text-4xl text-2xl font-bold text-center '> No reviews were added</h1>\n\n                    </div>\n\n\n            }\n        </div>\n    );\n};\n\nexport default MyReviews;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}