{"ast":null,"code":"import _slicedToArray from\"F:/sunshine-full-project/robert/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useContext}from\"react\";import{useEffect}from\"react\";import{useState}from\"react\";import toast from\"react-hot-toast\";import{AuthContext}from\"../../Context/UserContext/UserContext\";import useTitle from\"../../Hooks/useTitle\";import MyReviewCard from\"./MyReviewCard\";import\"./MyReview.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MyReviews=function MyReviews(){var _useContext=useContext(AuthContext),logOut=_useContext.logOut;useTitle(\"My Reviews\");var _useContext2=useContext(AuthContext),user=_useContext2.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),review=_useState2[0],setReview=_useState2[1];useEffect(function(){fetch(\" https://server-bay-theta.vercel.app/review?email=\".concat(user.email),{headers:{authorization:\"Bearer \".concat(localStorage.getItem(\"A C E RToken\"))}}).then(function(res){if(res.status===401||res.status===403){return logOut();}return res.json();}).then(function(data){var userBasedReview=data.filter(function(d){return d.customerEmail===(user===null||user===void 0?void 0:user.email);});setReview(userBasedReview);});},[logOut,user===null||user===void 0?void 0:user.email]);var handleDeleteReview=function handleDeleteReview(id){console.log(id);fetch(\"https://server-bay-theta.vercel.app/review/\".concat(id),{method:\"DELETE\"}).then(function(res){return res.json();}).then(function(data){console.log(data);if(data.deletedCount>0){toast.error(\"Comment Deleted Successfully\");var remainingReviews=review.filter(function(rev){return rev._id!==id;});setReview(remainingReviews);}});};return/*#__PURE__*/_jsx(\"div\",{className:\" px-4 mb-60 md:px-48 my-10\",children:review.length!==0?/*#__PURE__*/_jsx(_Fragment,{children:review===null||review===void 0?void 0:review.map(function(rev){return/*#__PURE__*/_jsx(MyReviewCard,{rev:rev,handleDeleteReview:handleDeleteReview},rev._id);})}):/*#__PURE__*/_jsx(\"div\",{className:\"text-nothing \",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"md:text-4xl text-2xl font-bold text-center \",children:[\" \",\"No reviews were added\"]})})});};export default MyReviews;","map":{"version":3,"names":["React","useContext","useEffect","useState","toast","AuthContext","useTitle","MyReviewCard","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","MyReviews","_useContext","logOut","_useContext2","user","_useState","_useState2","_slicedToArray","review","setReview","fetch","concat","email","headers","authorization","localStorage","getItem","then","res","status","json","data","userBasedReview","filter","d","customerEmail","handleDeleteReview","id","console","log","method","deletedCount","error","remainingReviews","rev","_id","className","children","length","map"],"sources":["F:/sunshine-full-project/robert/src/Pages/MyReviews/MyReviews.js"],"sourcesContent":["import React from \"react\";\nimport { useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport { useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport { AuthContext } from \"../../Context/UserContext/UserContext\";\nimport useTitle from \"../../Hooks/useTitle\";\nimport MyReviewCard from \"./MyReviewCard\";\nimport \"./MyReview.css\";\n\nconst MyReviews = () => {\n  const { logOut } = useContext(AuthContext);\n  useTitle(\"My Reviews\");\n\n  const { user } = useContext(AuthContext);\n  const [review, setReview] = useState([]);\n\n  useEffect(() => {\n    fetch(` https://server-bay-theta.vercel.app/review?email=${user.email}`, {\n      headers: {\n        authorization: `Bearer ${localStorage.getItem(\"A C E RToken\")}`,\n      },\n    })\n      .then((res) => {\n        if (res.status === 401 || res.status === 403) {\n          return logOut();\n        }\n        return res.json();\n      })\n      .then((data) => {\n        const userBasedReview = data.filter(\n          (d) => d.customerEmail === user?.email\n        );\n        setReview(userBasedReview);\n      });\n  }, [logOut, user?.email]);\n\n  const handleDeleteReview = (id) => {\n    console.log(id);\n    fetch(`https://server-bay-theta.vercel.app/review/${id}`, {\n      method: \"DELETE\",\n    })\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n        if (data.deletedCount > 0) {\n          toast.error(\"Comment Deleted Successfully\");\n          const remainingReviews = review.filter((rev) => rev._id !== id);\n\n          setReview(remainingReviews);\n        }\n      });\n  };\n\n  return (\n    <div className=\" px-4 mb-60 md:px-48 my-10\">\n      {review.length !== 0 ? (\n        <>\n          {review?.map((rev) => (\n            <MyReviewCard\n              key={rev._id}\n              rev={rev}\n              handleDeleteReview={handleDeleteReview}\n            ></MyReviewCard>\n          ))}\n        </>\n      ) : (\n        <div className=\"text-nothing \">\n          <h1 className=\"md:text-4xl text-2xl font-bold text-center \">\n            {\" \"}\n            No reviews were added\n          </h1>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MyReviews;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}